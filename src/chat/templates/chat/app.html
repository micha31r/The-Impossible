{% extends 'base.html' %}
{% load static %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'chat/app_page/main.css' %}">

    <button class="btn" id="show-chat-group-list" onclick="fade('.chat-group-list');">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
    </button>
    <div class="chat-group-list">

    </div>
    <div class="app-container">
        <div id="chat-log-container">
            {% for message in recent_messages.all %}
                <div class="chat-message-wrapper">
                    <div class="chat-message chat-message-{% if message.user == user %}self{% else %}other{% endif %}">{{ message }}</div>
                </div>
            {% endfor %}
        </div>

        <div class="chat-message-input-container">
            <input id="chat-message-input" type="text" placeholder="Type here..." maxlength="1000">
            <button class="btn" id="chat-message-submit">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
        </div>

        {{ chat_group_slug|json_script:"chat_group_slug" }}
        {{ user.username|json_script:"username" }}

        <script type="text/javascript" src="{% static 'chat/app_page/websocket.js' %}"></script>

        <!-- Resize js -->
        <script type="text/javascript" src="{% static 'chat/app_page/resize.js' %}"></script>

        <!-- Main js -->
        <script type="text/javascript" src="{% static 'chat/app_page/main.js' %}"></script>
    </div>
{% endblock %}