{% extends 'base.html' %}
{% load static %}

{% block title %}
	<title>{{ idea.name }} - The Impossible</title>
{% endblock %}

{% block content %}
	<!-- Explore page css -->
	<link rel="stylesheet" type="text/css" href="{% static 'explore_page/main.css' %}">

	<!-- Detail page css -->
	<link rel="stylesheet" type="text/css" href="{% static 'detail_page/main.css' %}">

	<!-- Main css -->
	<link rel="stylesheet" type="text/css" href="{% static 'edit_page/main.css' %}">

	<!-- Resize js -->
	<script type="text/javascript" src="{% static 'edit_page/resize.js' %}"></script>

	<!-- Delete confirm js -->
	<script type="text/javascript" src="{% static 'edit_page/delete_confirm.js' %}"></script>

	<div class="wrapper">
		<form method="post">
	    	{% csrf_token %}
	    	<table>
	    		<tr id="append-origin1">
	    			<td id="idea-content">
						<p>{{ form.name }}</p>
						<p>{{ form.short_description }}</p>
						<p>{{ form.full_description }}</p>
					</td>
					<td id="idea-setting">
						<h1><b>Settings</b></h1>
						<br>
						<table class="tags">
							<tr id="append-origin2">
								<td class="select-tags">
									<!-- Tags -->
									<h5><b>{{ form.tags.label }}({{ tags.count }}):</b></h5>
									<p>{{ form.tags_remain }}</p>
								</td>
								<td id="exsisting-tag">
									<h5><b>Exsisting Tags({{ idea.tags.count }}):</b></h5>
									{{ form.tags }}
								</td>
							</tr>
							<tr id="append-target2"></tr>
							<tr class="publish-stats" id="append-origin3">
								<td>
									<!-- Publish stats -->
									<h5><b>{{ form.publish_stats.label }}:</b></h5>
									<p>{{ form.publish_stats }}</p>
								</td>
								<td id="delete-button">
									<!-- Delete button -->
									<h5><b>Delete Idea:</b></h5>
									<p id="hidden" style="display:none;">{{ form.delete }}</p>
									<button class="btn btn-warning" id="confirm-button" onclick="click_confirm('hidden','confirm-button'); return false;">Reveal</button>
								</td>
							</tr>
							<tr id="append-target3"></tr>
							<tr>
								<td>
									<button class="btn btn-purple" type="submit" name="save-changes">Save Changes</button>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr id="append-target1">
				</tr>
			</table>
			<table style="margin-top: 50px;">
				<tr>
					<td>
						<h1><b>Images</b></h1>
					</td>
				</tr>
				<tr>
					<td>
						{% if idea.header_img.pk %}
							<a href="{% url 'userupload_file_page' pk=idea.header_img.pk referred_obj_name='Idea' referred_obj_pk=idea.pk referred_obj_field='header_img' %}">Replace Header Image</a>
						{% else %}
							<a href="{% url 'userupload_file_page' pk=None referred_obj_name='Idea' referred_obj_pk=idea.pk referred_obj_field='header_img' %}">Add Header Image</a>
						{% endif %}
					</td>
				</tr>
			</table>
		</form>

		<!-- Timestamp -->
		<div class="timestamp">
			<p>Created at <span class="time">{{ idea.timestamp }}</span></p>
			<p>Last Edited <span class="time">{{ idea.last_edit }}</span></p>
		</div>
	</div>
{% endblock %}